!function(e){function t(t){for(var s,o,r=t[0],h=t[1],d=t[2],l=0,u=[];l<r.length;l++)o=r[l],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&u.push(n[o][0]),n[o]=0;for(s in h)Object.prototype.hasOwnProperty.call(h,s)&&(e[s]=h[s]);for(c&&c(t);u.length;)u.shift()();return a.push.apply(a,d||[]),i()}function i(){for(var e,t=0;t<a.length;t++){for(var i=a[t],s=!0,r=1;r<i.length;r++){var h=i[r];0!==n[h]&&(s=!1)}s&&(a.splice(t--,1),e=o(o.s=i[0]))}return e}var s={},n={0:0},a=[];function o(t){if(s[t])return s[t].exports;var i=s[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,o),i.l=!0,i.exports}o.m=e,o.c=s,o.d=function(e,t,i){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)o.d(i,s,function(t){return e[t]}.bind(null,s));return i},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var r=window.webpackJsonp=window.webpackJsonp||[],h=r.push.bind(r);r.push=t,r=r.slice();for(var d=0;d<r.length;d++)t(r[d]);var c=h;a.push([22,1]),i()}([,,,,,,,function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Config=void 0;class s{}t.Config=s,s.debug=!1,s.ads={play:!1,playAgain:!0},s.mute=(s.debug,!0),s.images={background:"background"},s.sounds={click:"assets/sounds/click1.webm",switch:"assets/sounds/switch1.webm",pling1:"assets/sounds/pling1.mp3",pling2:"assets/sounds/pling2.mp3",pling3:"assets/sounds/pling3.mp3",pling4:"assets/sounds/pling4.mp3",pling5:"assets/sounds/pling5.mp3",pling6:"assets/sounds/pling6.mp3",pling7:"assets/sounds/pling7.mp3",pling8:"assets/sounds/pling8.mp3",pling9:"assets/sounds/pling9.mp3",engine:"assets/sounds/engine1.webm",gameover:"assets/sounds/gameover4.webm"},s.packer={name:"packer",background:"background-main.jpg",bannerHanging:"bannerHanging.png",bannerModern:"bannerModern.png",bannerScroll:"bannerScroll.png",gameInfoPannel:"gameInfoPannel.png",wood:"wood.png",coinEntry:"coin-entry.gif",coinSphere:"sphere.png",menuButton:"button_rectangleWood.png",coinBorder:"coin.gif",pattern:"patternStripesMetal_large.png",hand:"hand_cursor0000.png",emitterBlue:"blue.png",emitterRed:"red.png",soundOn:"sound-on.png",soundOff:"sound-off.png",difficulties:{easy:"dragon.png",medium:"dragon-head.png",hard:"double-dragon.png",insane:"dragon-spiral.png"}},s.difficulties={easy:{quota:50,timer:60,turn:15},medium:{quota:80,timer:45,turn:20},hard:{quota:200,timer:30,turn:25},insane:{quota:500,timer:15,turn:30}},s.events={game:{CHANGEDATA_SPHERE:"changedata-sphere",CHANGEDATA_ENTRIES:"changedata-entries",CHANGEDATA_BORDERS:"changedata-borders",CHANGEDATA_TURN:"changedata-turn",CHANGEDATA_TIMER:"changedata-timer",CHANGEDATA_QUOTA:"changedata-quota",CHANGEDATA_COMBO_COUNT:"changedata-comboCount",CHANGEDATA_COMBO_COUNT_GOAL:"changedata-comboCountGoal",CHANGEDATA_COMBO_MULTIPLE:"changedata-comboMultiple",CHANGEDATA_COMBO_MULTIPLE_GOAL:"changedata-comboMultipleGoal",CHANGEDATA_BORDERS_ACTIVE:"changedata-bordersActive",CHANGEDATA_ENTRIES_ACTIVE:"changedata-entriesActive",CHANGEDATA_BORDERS_ALIVE:"changedata-bordersAlive",CHANGEDATA_GAME_STATE:"changedata-gameState"}},s.board={width:348,height:348,borderPadding:4,borderSize:84,entrySize:80,entryPadding:8,sphereSize:60,marginTop:10,styles:{score:{fontFamily:"Play",fontSize:"50px",color:"white",fontStyle:"bold"}}},s.panels={board:{width:348,height:100,topPadding:32,leftPadding:28,offsetItem:20,middlePanelOffsetX:141,middlePanelOffsetY:19,rightPanelOffsetX:192,tweens:{base:{scale:{from:1.6,to:1},ease:"Sine.easeInOut",duration:220},setTimer:{scale:{from:1.2,to:1},ease:"Sine.easeInOut",duration:110},resetTimer:{scale:{from:1.8,to:1},ease:"Sine.easeInOut",duration:320}},styles:{text:{fontFamily:"Play",fontSize:"13px",color:"white",fontStyle:"bold"},timer:{fontFamily:"Play",fontSize:"38px",color:"white",fontStyle:"bold"}}},tutorial:{width:348,height:170,paddingX:20,paddingY:40,marginTop:10,styles:{text:{fontSize:"14px",lineSpacing:2,color:"white"}}}},s.scenes={skip:{scene:(s.debug,"noSkip")},keys:{game:"gameScene",gamePause:"gamePauseScene",gameOver:"gameOverScene",menu:"menuScene",boot:"bootScene",entriesSelection:"entriesSelectionScene",tutorial:"tutorialScene",tutorialStartEnd:"tutorialStartEndScene"},menu:{logState:!1,background:{width:375,height:380},entriesContainer:{x:-174,y:70},difficultiesContainer:{x:10,y:70},entries:{width:78,height:78,textBottomPadding:40,textLeftPadding:48,xPadding:6,yPadding:6},helperEntries:{width:110,height:110,xPadding:16,yPadding:16},difficulties:{width:78,height:78,textBottomPadding:40,textLeftPadding:16,xPadding:6,yPadding:6},buttonPlay:{x:-110,y:324},buttonTutorial:{x:34,y:324},soundImage:{x:144,y:324},tweens:{camera:{in:{alpha:1,ease:"Sine.easeInOut",duration:100},out:{alpha:.4,ease:"Sine.easeInOut",duration:100}}},styles:{button:{fontFamily:"Play",fontSize:"18px",color:"white",fontStyle:"bold"},coin:{fontFamily:"Play",fontSize:"30px",color:"white",fontStyle:"bold"},numero:{fontFamily:"Play",fontSize:"40px",color:"white",fontStyle:"bold"},helper:{fontFamily:"Play",fontSize:"50px",color:"white",fontStyle:"bold"}}},game:{reviveAfterTurn:5,textTimer:1e3,coinAnimationTimer:160,afterTurnTimer:220,afterTurnShakeIntensity:.0025,tweens:{camera:{in:{alpha:1,ease:"Sine.easeInOut",duration:100},out:{alpha:.4,ease:"Sine.easeInOut",duration:100}}}},gameOver:{button:{width:150,height:100,padding:20},styles:{button:{fontFamily:"Play",fontSize:"18px",color:"white",fontStyle:"bold"},text:{fontFamily:"Play",fontSize:"50px",color:"white",fontStyle:"bold"}}},tutorialStartEndScene:{styles:{text:{fontFamily:"Play",fontSize:"20px",color:"white",fontStyle:"bold"}}}}},,,,,,,,,,function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Board=void 0;const s=i(7);t.Board=class{constructor(e,t=!0){this.scene=e,this.isInteractive=t,this.handleClickedBorder=()=>{},this.handleClickedEntry=()=>{}}create(){this.setSphereGraphics(),this.setCoinGraphicsAndContainer(),this.setEntriesGraphicsAndContainer(),this.setScore(),this.setBoardContainer()}setScore(){this.scoreText=this.scene.add.text(s.Config.board.borderPadding+s.Config.board.borderSize+.5*s.Config.board.entrySize,s.Config.board.borderPadding+s.Config.board.borderSize+.5*s.Config.board.entrySize,"",s.Config.board.styles.score).setOrigin(.5,.5)}updateScore(e){this.scoreText.setText("+ "+e),this.scoreText.setAlpha(1),this.scoreText.x=s.Config.board.borderPadding+s.Config.board.borderSize+.5*s.Config.board.entrySize+Phaser.Math.Between(-20,20),this.scoreText.y=s.Config.board.borderPadding+s.Config.board.borderSize+.5*s.Config.board.entrySize,this.scoreTween=this.scene.tweens.add({targets:[this.scoreText],y:{from:this.scoreText.y,to:this.scoreText.y-150},ease:"Linear",duration:600,onComplete:()=>{this.scoreText.setAlpha(0)}})}attachClickBorder(e){return this.handleClickedBorder=e.bind(this.scene),this}attachClickEntry(e){return this.handleClickedEntry=e.bind(this.scene),this}setSphereGraphics(){this.sphereGraphics=this.scene.add.coin(s.Config.board.borderPadding+s.Config.board.borderSize+.5*s.Config.board.entrySize+4,s.Config.board.borderPadding+s.Config.board.borderSize+.5*s.Config.board.entrySize+6,s.Config.board.sphereSize,s.Config.board.sphereSize,"sphere",s.Config.packer.name,s.Config.packer.coinSphere,0)}setCoinGraphicsAndContainer(){const e=[[0,0],[1,0],[1,0],[1,0],[0,1],[0,1],[0,1],[-1,0],[-1,0],[-1,0],[0,-1],[0,-1]];let t=[0,0];this.bordersGraphics=[...Array(12).keys()].map(i=>{const[n,a]=t,[o,r]=e[i],h=n+o*(s.Config.board.borderSize+s.Config.board.borderPadding),d=a+r*(s.Config.board.borderSize+s.Config.board.borderPadding);t=[h,d];const c=this.scene.add.coin(h,d,s.Config.board.borderSize,s.Config.board.borderSize,"border",s.Config.packer.name,s.Config.packer.coinBorder,0);return this.isInteractive&&c.background.setInteractive({cursor:"pointer",pixelPerfect:!0}).on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,()=>this.handleClickedBorder(i),this),c}),this.coinsContainer=this.scene.add.container(0,0,this.bordersGraphics)}setEntriesGraphicsAndContainer(){const e=[[0,0],[1,0],[0,1],[-1,0]];let t=[0,0];this.entriesGraphics=[...Array(4).keys()].map(i=>{const[n,a]=t,[o,r]=e[i],h=n+o*(s.Config.board.entrySize+s.Config.board.entryPadding),d=a+r*(s.Config.board.entrySize+s.Config.board.entryPadding);t=[h,d];const c=this.scene.add.coin(h,d,s.Config.board.entrySize,s.Config.board.entrySize,"entry",s.Config.packer.name,s.Config.packer.coinEntry,0);return this.isInteractive&&c.background.setInteractive({cursor:"pointer",pixelPerfect:!0}).on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,()=>this.handleClickedEntry(i),this),c}),this.entriesContainer=this.scene.add.container(0,0,this.entriesGraphics).setPosition(s.Config.board.entrySize+s.Config.board.entryPadding,s.Config.board.entrySize+s.Config.board.entryPadding)}setBoardContainer(){this.container=this.scene.add.container(0,0,[this.coinsContainer,this.entriesContainer,this.sphereGraphics,this.scoreText]),this.setPosition()}setPosition(){this.container.setPosition(s.Config.board.borderSize/2,s.Config.board.borderSize/2+s.Config.panels.board.height+10)}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BoardPanelContainer=void 0;const s=i(32),n=i(33),a=i(34),o=i(7);t.BoardPanelContainer=class{constructor(e){this.scene=e,this.boardLeftPanel=new s.BoardLeftPanel(e),this.boardMiddlePanel=new a.BoardMiddlePanel(e),this.boardRigthPanel=new n.BoardRightPanel(e)}create(){this.initBackground(),this.boardLeftPanel.create(),this.boardLeftPanel.container.setPosition(o.Config.panels.board.leftPadding,o.Config.panels.board.topPadding),this.boardMiddlePanel.create(),this.boardMiddlePanel.container.setPosition(o.Config.panels.board.leftPadding+o.Config.panels.board.middlePanelOffsetX,o.Config.panels.board.topPadding+o.Config.panels.board.middlePanelOffsetY),this.boardRigthPanel.create(),this.boardRigthPanel.container.setPosition(o.Config.panels.board.leftPadding+o.Config.panels.board.rightPanelOffsetX,o.Config.panels.board.topPadding),this.container=this.scene.add.container(0,0,[this.background,this.boardLeftPanel.container,this.boardMiddlePanel.container,this.boardRigthPanel.container]),this.setPosition()}initBackground(){this.background=this.scene.add.image(0,0,o.Config.packer.name,o.Config.packer.bannerModern).setOrigin(0,0).setSize(o.Config.panels.board.width,o.Config.panels.board.height).setDisplaySize(o.Config.panels.board.width,o.Config.panels.board.height)}setPosition(){this.container.setPosition(0,0)}}},,function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buildMenuService=t.ACTIONS=t.EVENT=t.STATE=void 0;const s=i(46);t.STATE={BASE:"base",ENTRIES_SELECTED:"entriesSelected",INACTIVE:"inactive"},t.EVENT={PLAY:"PLAY",TUTORIAL:"TUTORIAL",SELECT_DIFFICULTY:"SELECT_DIFFICULTY",SELECT_ENTRIES:"SELECT_ENTRIES",UNSELECT_ENTRIES:"UNSELECT_ENTRIES",SELECT_ENTRY:"SELECT_ENTRY",WAKE:"WAKE"},t.ACTIONS={PLAY:"play",TUTORIAL:"tutorial",CHANGE_DIFFICULTY:"changeDifficulty",SELECT_ENTRIES:"selectEntries",SELECT_ENTRY:"selectEntry",UNSELECT_ENTRY:"unselect_entry"};const n=s.createMachine({id:"menu",initial:t.STATE.BASE,states:{[t.STATE.BASE]:{on:{[t.EVENT.PLAY]:{actions:[t.ACTIONS.PLAY],internal:!0,target:t.STATE.BASE},[t.EVENT.TUTORIAL]:{actions:[t.ACTIONS.TUTORIAL],internal:!0,target:t.STATE.BASE},[t.EVENT.SELECT_ENTRIES]:{target:t.STATE.ENTRIES_SELECTED},[t.EVENT.SELECT_DIFFICULTY]:{target:t.STATE.BASE,internal:!0,actions:[t.ACTIONS.CHANGE_DIFFICULTY]}}},[t.STATE.ENTRIES_SELECTED]:{entry:[t.ACTIONS.SELECT_ENTRIES],on:{[t.EVENT.UNSELECT_ENTRIES]:{actions:[t.ACTIONS.UNSELECT_ENTRY],target:t.STATE.INACTIVE},[t.EVENT.SELECT_ENTRY]:{actions:[t.ACTIONS.SELECT_ENTRY],target:t.STATE.INACTIVE}}},[t.STATE.INACTIVE]:{on:{[t.EVENT.WAKE]:{target:t.STATE.BASE}}}}},{actions:{[t.ACTIONS.PLAY]:(e,t)=>{e.scene.handlePlay()},[t.ACTIONS.TUTORIAL]:(e,t)=>{e.scene.handleTutorial()},[t.ACTIONS.CHANGE_DIFFICULTY]:(e,t)=>{e.scene.handleDifficultySelected(t.value)},[t.ACTIONS.SELECT_ENTRIES]:(e,t)=>{e.scene.handleEntriesSelected(t.value.entry,t.value.index)},[t.ACTIONS.SELECT_ENTRY]:(e,t)=>{e.scene.handleEntrySelected(t.value)},[t.ACTIONS.UNSELECT_ENTRY]:(e,t)=>{e.scene.fromEntriesToSelectionToMenu()}}});t.buildMenuService=function(e){return s.interpret(n.withContext({scene:e}))}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EntryGraphicsHelper=t.EntryGrahpics=t.DifficultyGraphics=void 0;const s=i(7);class n extends Phaser.GameObjects.Container{constructor(e,t,i,n,a,o,r,h,d){super(e,i,n),this.name=t,this.background=e.add.graphics(),this.background.fillStyle(d),this.background.fillRect(0,0,a,o),this.background.setAlpha(0),this.image=e.add.image(2,2,r,h).setOrigin(0,0).setDisplaySize(a-4,o-4).setSize(a-4,o-4);this.text=e.add.text(0,0,{easy:"1",medium:"2",hard:"3",insane:"4"}[this.name],s.Config.scenes.menu.styles.numero),Phaser.Display.Align.In.Center(this.text,this.image),this.add([this.background,this.image,this.text])}selectDifficulty(){this.scene.difficultiesGraphics.forEach(e=>{e.background.setAlpha(0)}),this.background.setAlpha(1)}}t.DifficultyGraphics=n;class a extends Phaser.GameObjects.Container{constructor(e,t,i,n,a,o,r,h){super(e,t,i),this.numero=h,this.image=e.add.image(0,0,o,r).setOrigin(0,0).setSize(n,a).setDisplaySize(n,a),this.text=e.add.text(0,0,""+this.numero,s.Config.scenes.menu.styles.numero),Phaser.Display.Align.In.Center(this.text,this.image),this.add([this.image,this.text])}setNumero(e){return this.numero=e,this.text.setText(""+e),this}}t.EntryGrahpics=a;class o extends Phaser.GameObjects.Container{constructor(e,t,i,n,a,o,r,h){super(e,t,i),this.numero=h,this.image=e.add.image(0,0,o,r).setOrigin(.5,.5).setDisplaySize(n,a).setSize(n,a),this.text=e.add.text(0,0,""+this.numero,s.Config.scenes.menu.styles.helper),Phaser.Display.Align.In.Center(this.text,this.image),this.add([this.image,this.text])}setNumero(e){return this.numero=e,this.text.setText(""+e),this}switchNumber(){console.log("switch")}}t.EntryGraphicsHelper=o},function(e,t,i){e.exports=i(23)},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(24),n=i(25),a=i(27),o=i(28),r=i(45),h=i(7);s.GameObjects.GameObjectFactory.register("buttonContainer",(function(e,t,i,s,a=16777215){return this.displayList.add(new n.ButtonContainer(this.scene,e,t,i,s,a))})),s.GameObjects.GameObjectFactory.register("coin",(function(e,t,i,s,n,o,r,h){return this.displayList.add(new a.CoinGraphics(this.scene,e,t,i,s,n,o,r,h))})),window.game=new o.MyGame,h.Config.debug?r.mockGameDistribution():r.initGameDistribution()},,function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ButtonContainer=void 0;const s=i(26);class n extends Phaser.GameObjects.Container{constructor(e,t,i,n,a,o=16777215){super(e,t,i),this.button=new s.Button(e,0,0,n,a,o),this.text=e.add.text(0,0,"Button",{color:"black"}).setOrigin(.5,.5),this.add(this.button),this.add(this.text)}setText(e){return this.text.text=e,this}setTextStyle(e){return this.text.setStyle(e),this}setUpFrame(e){return this.button.setUpFrame(e),this}setUpTint(e){return this.button.setUpTint(e),this}setDownFrame(e){return this.button.setDownFrame(e),this}setDownTint(e){return this.button.setDownTint(e),this}setOverFrame(e){return this.button.setOverFrame(e),this}setOverTint(e){return this.button.setOverTint(e),this}setDisabledFrame(e){return this.button.setDisabledFrame(e),this}setDisabledTint(e){return this.button.setDisabledTint(e),this}setDisabled(e){return this.setDisabled(e),this}}t.ButtonContainer=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Button=void 0;class s extends Phaser.GameObjects.Image{constructor(e,t,i,s,n,a=16777215){super(e,t,i,s,n),this.setTint(a),this.upFrame=n,this.upTint=a,this.downFrame=n,this.downTint=a,this.overFrame=n,this.overTint=a,this.disabledFrame=n,this.disabledTint=a,this.setInteractive({cursor:"pointer"}).on(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,this.handleUp,this).on(Phaser.Input.Events.GAMEOBJECT_POINTER_OUT,this.handleOut,this).on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,this.handleDown,this).on(Phaser.Input.Events.GAMEOBJECT_POINTER_OVER,this.handleOver,this)}setUpFrame(e){return this.upFrame=e,this}setUpTint(e){return this.upTint=e,this}setDownFrame(e){return this.downFrame=e,this}setDownTint(e){return this.downTint=e,this}setOverFrame(e){return this.overFrame=e,this}setOverTint(e){return this.overTint=e,this}setDisabledFrame(e){return this.disabledFrame=e,this}setDisabledTint(e){return this.disabledTint=e,this}setDisabled(e){return e?(this.setFrame(this.disabledFrame),this.setTint(this.disabledTint),this.disableInteractive(),this):(this.setFrame(this.upFrame),this.setTint(this.disabledTint),this.setInteractive(),this)}handleUp(e){this.handleOver(e)}handleOut(e){this.setFrame(this.upFrame),this.setTint(this.upTint)}handleDown(e){this.setFrame(this.downFrame),this.setTint(this.downTint)}handleOver(e){this.setFrame(this.overFrame),this.setTint(this.overTint)}}t.Button=s},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CoinGraphics=void 0;const s=i(7),n={fontFamily:"Play",fontSize:"40px",color:"white",fontStyle:"bold"};class a extends Phaser.GameObjects.Container{constructor(e,t,i,s,a,o,r,h,d){super(e,t,i),this.state="inactive",this.type=o,this.text=e.add.text(0,0,d).setStyle(n),this.background=e.add.image(0,0,r,h).setOrigin(.5,.5),this.background.setDisplaySize(s,a),this.background.setSize(s,a),Phaser.Display.Align.In.Center(this.text,this.background),this.add([this.background,this.text]),this.setTweenFlipping(),this.defaultScale=this.background.scaleX}setFrame(e){return this.background.setFrame(e),this}setText(e){return this.text.setText(""+e),this}setState(e){switch(this.state=e,this.state){case"inactive":this.displayInactive();break;case"dead":this.displayDead();break;case"active":this.displayActive();break;case"focus":this.focus();break;case"unfocus":this.revive()}return this}setTweenFlipping(){this.tweenFlipping=this.scene.tweens.add({targets:this.background,scaleX:0,ease:"Sine.easeInOut",duration:s.Config.scenes.game.coinAnimationTimer,repeat:-1,yoyo:!0,paused:!0})}revive(){this.tweenRevive=this.scene.tweens.timeline({targets:this,ease:"Sine.easeOutIn",tweens:[{scaleX:.2,scaleY:.2,duration:0,alpha:0},{scaleX:1,scaleY:1,alpha:1,duration:140}]})}displayDead(){this.tweenKill=this.scene.tweens.timeline({targets:this,ease:"Sine.easeInOut",tweens:[{scaleX:1,scaleY:1,duration:0,alpha:1},{scaleX:.2,scaleY:.2,alpha:0,duration:140}]})}focus(){this.tweenFocus=this.scene.tweens.add({targets:this,ease:"Sine.easeInOut",scale:{from:1.1,to:1},duration:100})}displayActive(){this.tweenFlipping.resume()}displayInactive(){this.scene.time.delayedCall(0,()=>{this.background.scaleX=this.defaultScale,this.tweenFlipping.pause()})}}t.CoinGraphics=a},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MyGame=void 0;const s=i(29),n=i(30),a=i(39),o=i(41),r=i(42),h=i(43),d=i(44),c=i(7),l=i(19);class u extends Phaser.Game{constructor(){super({type:Phaser.CANVAS,title:"spherebreak",scale:{width:window.innerWidth,height:window.innerHeight,parent:"spherebreak"},parent:"spherebreak",dom:{createContainer:!0},plugins:{global:[{key:"WebFontLoader",plugin:o.WebFontLoaderPlugin,start:!0}]},audio:{disableWebAudio:!0,noAudio:!0},scene:[s.BootScene,a.MenuScene,n.GameScene,h.GameOverScene,n.PauseScene,r.EntriesSelectionScene,n.TutorialScene,d.TutorialStartEndScene]})}registerSounds(){this.sounds={click:new l.Howl({src:[c.Config.sounds.click]}),switch:new l.Howl({src:[c.Config.sounds.switch]}),pling1:new l.Howl({src:[c.Config.sounds.pling1]}),pling2:new l.Howl({src:[c.Config.sounds.pling2]}),pling3:new l.Howl({src:[c.Config.sounds.pling3]}),pling4:new l.Howl({src:[c.Config.sounds.pling4]}),pling5:new l.Howl({src:[c.Config.sounds.pling5]}),pling6:new l.Howl({src:[c.Config.sounds.pling6]}),pling7:new l.Howl({src:[c.Config.sounds.pling7]}),pling8:new l.Howl({src:[c.Config.sounds.pling8]}),pling9:new l.Howl({src:[c.Config.sounds.pling9]}),engine:new l.Howl({src:[c.Config.sounds.engine]}),gameover:new l.Howl({src:[c.Config.sounds.gameover]})}}start(){this.registerSounds(),this.isMute=c.Config.mute,l.Howler.autoUnlock=!1,this.isMute&&l.Howler.mute(this.isMute),super.start()}}t.MyGame=u},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BootScene=void 0;const s=i(7);class n extends Phaser.Scene{constructor(){super({key:s.Config.scenes.keys.boot})}preload(){this.cameras.main.setBackgroundColor(0),this.createLoadingGraphics(),this.load.on("progress",e=>{this.progressBar.clear(),this.progressBar.fillStyle(65280,1),this.progressBar.fillRect(this.cameras.main.width/4,this.cameras.main.height/2-16,this.cameras.main.width/2*e,16)},this),this.load.on("complete",e=>{this.progressBar.destroy(),this.loadingBar.destroy(),this.scene.start(s.Config.scenes.keys.menu)}),this.load.pack("preload","assets/pack.json","preload"),this.load.webfont("Open Sans","https://fonts.googleapis.com/css2?family=Open+Sans&display=swap"),this.load.webfont("Play","https://fonts.googleapis.com/css2?family=Play&display=swap")}createLoadingGraphics(){this.loadingBar=this.add.graphics(),this.loadingBar.fillStyle(65280,1),this.loadingBar.fillRect(this.cameras.main.width/4-2,this.cameras.main.height/2-18,this.cameras.main.width/2+4,20),this.progressBar=this.add.graphics()}}t.BootScene=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TutorialScene=t.GameScene=t.PauseScene=void 0;const s=i(31);Object.defineProperty(t,"GameScene",{enumerable:!0,get:function(){return s.GameScene}});const n=i(36);Object.defineProperty(t,"TutorialScene",{enumerable:!0,get:function(){return n.TutorialScene}});const a=i(38);Object.defineProperty(t,"PauseScene",{enumerable:!0,get:function(){return a.PauseScene}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GameScene=void 0;const s=i(7),n=i(17),a=i(18),o=i(35);class r extends Phaser.Scene{constructor(){super({key:s.Config.scenes.keys.game})}init(){window.addEventListener("resize",()=>{this.background.setDisplaySize(window.innerWidth,window.innerHeight),this.background.setPosition(0,0),this.setPositionContainer()},!1),this.data=new o.GameDataManager(this),this.registerDataEvents(),this.board=new n.Board(this).attachClickBorder(this.handleClickedBorder).attachClickEntry(this.handleClickedEntry),this.boardPanel=new a.BoardPanelContainer(this),this.bordersStateChanged=[],this.scene.launch(s.Config.scenes.keys.gameOver),this.scene.sleep(s.Config.scenes.keys.gameOver),s.Config.debug&&this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.P).on("down",()=>{this.scene.pause(s.Config.scenes.keys.game),this.scene.wake(s.Config.scenes.keys.gamePause)}),this.cameras.main.fadeIn(300,0,0,0),this.events.on("wake",()=>{this.cameras.main.fadeIn(300,0,0,0)}),this.events.on("shutdown",()=>{for(const e of Object.values(s.Config.events.game))this.events.off(e)})}create(e){this.setBackground(),this.board.create(),this.boardPanel.create(),this.container=this.add.container(0,0,[this.board.container,this.boardPanel.container]),this.setPositionContainer(),this.initData(e),this.initTimerSyncCoin(),this.startTimerTurn(),this.registerEmitters(),this.registerSounds()}initData(e){const t=s.Config.difficulties[e.difficulty];this.data.maxTimer=t.timer,this.data.timer=this.data.maxTimer,this.data.maxTurn=t.turn,this.data.maxQuota=t.quota,this.data.entries=e.entries,this.data.comboMultipleGoal=null,this.data.comboCountGoal=null,this.data.comboCount=0,this.data.comboMultiple=0,this.data.turn=0,this.data.quota=0,this.data.sphere=this.data.pickNewRandomNumber(),this.data.borders=this.data.borders.map(e=>this.data.pickNewRandomNumber())}registerDataEvents(){this.events.on(s.Config.events.game.CHANGEDATA_SPHERE,(e,t)=>{this.board.sphereGraphics.setText(t),this.board.sphereGraphics.revive()}),this.events.on(s.Config.events.game.CHANGEDATA_ENTRIES,(e,t)=>{t.forEach((e,t)=>{this.board.entriesGraphics[t].setText(e)})}),this.events.on(s.Config.events.game.CHANGEDATA_BORDERS,(e,t)=>{t.forEach((e,t)=>{this.board.bordersGraphics[t].setText(e)})}),this.events.on(s.Config.events.game.CHANGEDATA_TURN,(e,t)=>{this.boardPanel.boardLeftPanel.setTurnText(t,this.data.maxTurn)}),this.events.on(s.Config.events.game.CHANGEDATA_TIMER,(e,t)=>{t===this.data.maxTimer?this.boardPanel.boardMiddlePanel.resetTimerText(t):this.boardPanel.boardMiddlePanel.setTimerText(t),0===t&&this.data.nextTurn()}),this.events.on(s.Config.events.game.CHANGEDATA_QUOTA,(e,t)=>{this.boardPanel.boardLeftPanel.setQuotaText(t,this.data.maxQuota)}),this.events.on(s.Config.events.game.CHANGEDATA_COMBO_COUNT,(e,t)=>{this.boardPanel.boardRigthPanel.setComboCountText(t,this.data.comboCountGoal)}),this.events.on(s.Config.events.game.CHANGEDATA_COMBO_COUNT_GOAL,(e,t)=>{this.boardPanel.boardRigthPanel.setComboCountText(this.data.comboCount,t)}),this.events.on(s.Config.events.game.CHANGEDATA_COMBO_MULTIPLE,(e,t)=>{this.boardPanel.boardRigthPanel.setComboMultipleText(t,this.data.comboMultipleGoal)}),this.events.on(s.Config.events.game.CHANGEDATA_COMBO_MULTIPLE_GOAL,(e,t)=>{this.boardPanel.boardRigthPanel.setComboMultipleText(this.data.comboMultiple,t)}),this.events.on(s.Config.events.game.CHANGEDATA_BORDERS_ACTIVE,(e,t)=>{const i=this.data.bordersActiveIndexesChanged.map(e=>this.data.bordersActive[e]?(this.playSoundOnCoinActive(),this.playAnimationOnCoinActive(),this.board.bordersGraphics[e].setState("focus"),["active",this.board.bordersGraphics[e]]):["inactive",this.board.bordersGraphics[e]]);this.bordersStateChanged=[...this.bordersStateChanged,...i]}),this.events.on(s.Config.events.game.CHANGEDATA_ENTRIES_ACTIVE,(e,t)=>{const i=this.data.entriesActiveIndexesChanged.map(e=>this.data.entriesActive[e]?(this.playSoundOnCoinActive(),this.playAnimationOnCoinActive(),this.board.entriesGraphics[e].setState("focus"),["active",this.board.entriesGraphics[e]]):(this.board.entriesGraphics[e].setState("unfocus"),["inactive",this.board.entriesGraphics[e]]));this.bordersStateChanged=[...this.bordersStateChanged,...i]}),this.events.on(s.Config.events.game.CHANGEDATA_BORDERS_ALIVE,(e,t)=>{const i=this.data.bordersAliveIndexesChanged.filter(e=>!this.data.bordersAlive[e]).map(e=>["dead",this.board.bordersGraphics[e]]);this.data.bordersAliveIndexesChanged.filter(e=>this.data.bordersAlive[e]).forEach(e=>{this.board.bordersGraphics[e].revive()}),this.bordersStateChanged=[...this.bordersStateChanged,...i]}),this.events.on(s.Config.events.game.CHANGEDATA_GAME_STATE,(e,t)=>{switch(t){case"startGame":break;case"winTurn":this.board.updateScore(this.data.score),this.cameras.main.shake(s.Config.scenes.game.afterTurnTimer,s.Config.scenes.game.afterTurnShakeIntensity,!0,(e,t)=>{1===t&&this.startTimerTurn()});break;case"loseTurn":this.board.updateScore(0),this.cameras.main.shake(3*s.Config.scenes.game.afterTurnTimer,10*s.Config.scenes.game.afterTurnShakeIntensity,!0,(e,t)=>{1===t&&this.startTimerTurn()});break;case"winGame":this.handleWin();break;case"loseGame":this.handleLose()}})}registerSounds(){this.plings=[this.game.sounds.pling1,this.game.sounds.pling2,this.game.sounds.pling3,this.game.sounds.pling4,this.game.sounds.pling5,this.game.sounds.pling6,this.game.sounds.pling7,this.game.sounds.pling8,this.game.sounds.pling9]}registerEmitters(){this.emitterEndGame=this.add.particles(s.Config.packer.name,s.Config.packer.emitterRed).createEmitter({x:.5*this.scale.width,y:.5*this.scale.height+.5*s.Config.panels.board.height,speed:200,scale:1,blendMode:Phaser.BlendModes.ADD,frequency:20,active:!1}),this.emitterExplodeBlue=this.add.particles(s.Config.packer.name,s.Config.packer.emitterBlue).createEmitter({speed:{min:-600,max:600},angle:{min:0,max:360},scale:{start:.5,end:0},blendMode:"SCREEN",lifespan:300,gravityY:100,active:!1}),this.emitterExplodeRed=this.add.particles(s.Config.packer.name,s.Config.packer.emitterRed).createEmitter({speed:{min:-600,max:600},angle:{min:0,max:360},scale:{start:.5,end:0},blendMode:"SCREEN",lifespan:300,gravityY:100,active:!1})}initTimerSyncCoin(){this.timerSyncCoin&&this.timerSyncCoin.destroy(),this.timerSyncCoin=this.time.addEvent({delay:2*s.Config.scenes.game.coinAnimationTimer,callback:()=>{this.bordersStateChanged.forEach(e=>{const[t,i]=e;i.setState(t)}),this.bordersStateChanged=[]},loop:!0})}startTimerTurn(){this.timerTurn&&this.timerTurn.destroy(),this.timerTurn=this.time.addEvent({repeat:this.data.maxTimer-1,delay:s.Config.scenes.game.textTimer,callback:()=>{this.data.timer=this.timerTurn.repeatCount}})}setBackground(){this.background=this.add.image(0,0,s.Config.images.background).setOrigin(0,0).setDisplaySize(this.scale.width,this.scale.height)}handleClickedBorder(e){this.data.bordersActive=this.data.bordersActive.map((t,i)=>e===i||t),this.data.nextTurn()}handleClickedEntry(e){this.data.entriesActive=this.data.entriesActive.map((t,i)=>e===i||t),this.data.nextTurn()}setPositionContainer(){this.container.setPosition(this.scale.width/2-s.Config.board.width/2,this.scale.height/2-(s.Config.board.height+s.Config.panels.board.height+10)/2)}playSoundOnCoinActive(){this.plings[this.data.lengthActives%this.plings.length].play()}playAnimationOnCoinActive(){this.emitterExplodeBlue.explode(2,this.input.activePointer.x,this.input.activePointer.y),this.emitterExplodeBlue.active=!0,this.emitterExplodeRed.explode(2,this.input.activePointer.x,this.input.activePointer.y),this.emitterExplodeRed.active=!0}handleLose(){this.handleEndGame(s.Config.packer.emitterRed,new Phaser.Display.Color(255,100,100))}handleWin(){this.handleEndGame(s.Config.packer.emitterBlue,new Phaser.Display.Color(100,100,255))}handleEndGame(e,t){this.emitterEndGame.active=!0,this.emitterEndGame.setFrame(e);let i=!1,n=!1;this.cameras.main.shake(2e3,.002,!1,(e,a)=>{i||(this.game.sounds.engine.play(),i=!0),1===a&&this.cameras.main.flash(1e3,t.red,t.green,t.blue,!1,(e,t)=>{n||(n=!0,this.game.sounds.gameover.play(),this.emitterEndGame.setAngle(-90),this.emitterEndGame.setGravityY(-8e3),this.emitterEndGame.stop()),t>=.1&&this.emitterEndGame.setGravityY(4e3),t>=.8&&(this.emitterEndGame.active=!1,this.emitterEndGame.killAll()),t>=1&&(this.scene.pause(s.Config.scenes.keys.game),this.scene.wake(s.Config.scenes.keys.gameOver),this.scene.bringToTop(s.Config.scenes.keys.gameOver))})})}}t.GameScene=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BoardLeftPanel=void 0;const s=i(7);t.BoardLeftPanel=class{constructor(e){this.scene=e}create(){this.initTurnText(),this.initQuotaText(),this.initContainer()}initTurnText(){this.prefixTurnText=this.scene.add.text(0,0,"Turn").setPosition(0,8).setOrigin(0,.5).setStyle(s.Config.panels.board.styles.text),this.currentTurnText=this.scene.add.text(0,0,"0").setPosition(72,8).setOrigin(1,.5).setStyle(s.Config.panels.board.styles.text),this.separatorTurnText=this.scene.add.text(0,0,"/").setPosition(76,8).setOrigin(.5,.5).setStyle(s.Config.panels.board.styles.text),this.maxTurnText=this.scene.add.text(0,0,"0").setPosition(80,8).setOrigin(0,.5).setStyle(s.Config.panels.board.styles.text)}initQuotaText(){this.prefixQuotaText=this.scene.add.text(0,0,"Quota").setPosition(0,s.Config.panels.board.offsetItem+8).setOrigin(0,.5).setStyle(s.Config.panels.board.styles.text),this.currentQuotaText=this.scene.add.text(0,0,"0").setPosition(72,s.Config.panels.board.offsetItem+8).setOrigin(1,.5).setStyle(s.Config.panels.board.styles.text),this.separatorQuotaText=this.scene.add.text(0,0,"/").setPosition(76,s.Config.panels.board.offsetItem+8).setOrigin(.5,.5).setStyle(s.Config.panels.board.styles.text),this.maxQuotaText=this.scene.add.text(0,0,"0").setPosition(80,s.Config.panels.board.offsetItem+8).setOrigin(0,.5).setStyle(s.Config.panels.board.styles.text)}setTurnText(e,t){this.scene.tweens.add({...s.Config.panels.board.tweens.base,targets:[this.currentTurnText,this.maxTurnText],onComplete:()=>{const i=Math.floor(Math.log10(t)),s=i-Math.floor(Math.log10(e)),n="0".repeat(s!==1/0?s:i);this.currentTurnText.setText(`${n}${e}`),this.maxTurnText.setText(""+t)}})}setQuotaText(e,t){this.scene.tweens.add({...s.Config.panels.board.tweens.base,targets:[this.currentQuotaText,this.maxQuotaText],onComplete:()=>{const i=Math.floor(Math.log10(t)),s=i-Math.floor(Math.log10(e)),n="0".repeat(s!==1/0?s:i);this.currentQuotaText.setText(`${n}${e}`),this.maxQuotaText.setText(""+t)}})}initContainer(){this.container=this.scene.add.container(0,0,[this.prefixTurnText,this.currentTurnText,this.separatorTurnText,this.maxTurnText,this.prefixQuotaText,this.currentQuotaText,this.separatorQuotaText,this.maxQuotaText])}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BoardRightPanel=void 0;const s=i(7);t.BoardRightPanel=class{constructor(e){this.scene=e}create(){this.initComboMultipleText(),this.initComboCountText(),this.initContainer()}initComboMultipleText(){this.prefixComboMultipleText=this.scene.add.text(0,0,"Multiple").setPosition(0,8).setOrigin(0,.5).setStyle(s.Config.panels.board.styles.text),this.currentComboMultipleText=this.scene.add.text(0,0,"0").setPosition(68,8).setOrigin(1,.5).setStyle(s.Config.panels.board.styles.text),this.separatorComboMultipleText=this.scene.add.text(0,0,"->").setPosition(80,8).setOrigin(.5,.5).setStyle(s.Config.panels.board.styles.text),this.goalComboMultipleText=this.scene.add.text(0,0,"0").setPosition(92,8).setOrigin(0,.5).setStyle(s.Config.panels.board.styles.text)}initComboCountText(){this.prefixComboCountText=this.scene.add.text(0,0,"Count").setPosition(0,s.Config.panels.board.offsetItem+8).setOrigin(0,.5).setStyle(s.Config.panels.board.styles.text),this.currentComboCountText=this.scene.add.text(0,0,"0").setPosition(68,s.Config.panels.board.offsetItem+8).setOrigin(1,.5).setStyle(s.Config.panels.board.styles.text),this.separatorComboCountText=this.scene.add.text(0,0,"->").setPosition(80,s.Config.panels.board.offsetItem+8).setOrigin(.5,.5).setStyle(s.Config.panels.board.styles.text),this.goalComboCountText=this.scene.add.text(0,0,"0").setPosition(92,s.Config.panels.board.offsetItem+8).setOrigin(0,.5).setStyle(s.Config.panels.board.styles.text)}setComboMultipleText(e,t){this.scene.tweens.add({...s.Config.panels.board.tweens.base,targets:[this.currentComboMultipleText,this.goalComboMultipleText],onComplete:()=>{this.currentComboMultipleText.setText(""+e),this.goalComboMultipleText.setText(""+(t||"-"))}})}setComboCountText(e,t){this.scene.tweens.add({...s.Config.panels.board.tweens.base,targets:[this.currentComboCountText,this.goalComboCountText],onComplete:()=>{this.currentComboCountText.setText(""+e),this.goalComboCountText.setText(""+(t||"-"))}})}initContainer(){this.container=this.scene.add.container(0,0,[this.prefixComboMultipleText,this.currentComboMultipleText,this.separatorComboMultipleText,this.goalComboMultipleText,this.prefixComboCountText,this.currentComboCountText,this.separatorComboCountText,this.goalComboCountText])}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BoardMiddlePanel=void 0;const s=i(7);t.BoardMiddlePanel=class{constructor(e){this.scene=e}create(){this.initTimerText(),this.initContainer()}initTimerText(){this.timerText=this.scene.add.text(0,0,"").setPosition(0,0).setOrigin(.5,.5).setStyle(s.Config.panels.board.styles.timer),this.resetTimerText(0)}resetTimerText(e){this.scene.tweens.add({...s.Config.panels.board.tweens.resetTimer,targets:[this.timerText],onComplete:()=>{this.timerText.setText(" "+e)}})}setTimerText(e){this.scene.tweens.add({...s.Config.panels.board.tweens.setTimer,targets:[this.timerText],onComplete:()=>{this.timerText.setText(" "+e)}})}initContainer(){this.container=this.scene.add.container(0,0,[this.timerText])}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GameDataManager=void 0;const s=i(7);class n extends Phaser.Data.DataManager{constructor(e){super(e),this.turn=0,this.timer=0,this.quota=0,this.gameState="startGame",this.maxTurn=0,this.maxQuota=0,this.comboCount=0,this.comboMultiple=0,this.comboMultipleGoal=null,this.comboCountGoal=null,this.ratioCreateBorders=0,this.sphere=0,this.score=0,this.entries=new Array(4).fill(0),this.entriesActiveIndexesChanged=[],this.set("entriesActive",new Array(4).fill(!1)),this.borders=new Array(12).fill(0),this.set("bordersActive",new Array(12).fill(!1)),this.set("bordersAlive",new Array(12).fill(!0)),this.bordersDeadCount=new Array(12).fill(0),this.bordersActiveIndexesChanged=[],this.bordersAliveIndexesChanged=[],this.reviveAfterTurn=s.Config.scenes.game.reviveAfterTurn}get total(){const e=this.borders.filter((e,t)=>this.bordersActive[t]),t=this.entries.filter((e,t)=>this.entriesActive[t]);return e.reduce((e,t)=>e+t,0)+t.reduce((e,t)=>e+t,0)}get lengthActives(){const e=this.borders.filter((e,t)=>this.bordersActive[t]),t=this.entries.filter((e,t)=>this.entriesActive[t]);return e.length+t.length}get comboCountCurrent(){const e=this.borders.filter((e,t)=>this.bordersActive[t]),t=this.entries.filter((e,t)=>this.entriesActive[t]);return e.length+t.length}get comboMultipleCurrent(){return Math.floor(this.total/this.sphere)}comboPointByKey(e){return 0===e?0:2*(e-1)}get comboCountPoint(){return this.comboPointByKey(this.comboCount)}get comboMultiplePoint(){return this.comboPointByKey(this.comboMultiple)}get point(){return this.score=this.bordersActive.filter(e=>e).length+this.comboCountPoint+this.comboMultiplePoint,this.score}isTotalMultipleOfSphere(){return 0!==this.total&&this.total%this.sphere==0}isTimerOver(){return 0===this.timer}isAllSphereActive(){const e=this.entriesActive.every(e=>e);let t=[];for(let e=0;e<this.bordersActive.length;e++)t.push(this.bordersActive[e]||!this.bordersAlive[e]);return t.every(e=>e)&&e}isMaxTurnReached(){return this.turn>=this.maxTurn}isQuotaReached(){return this.quota>=this.maxQuota}nextTurn(){let e="startGame";this.isTotalMultipleOfSphere()?(this.handleWinTurn(),e="winTurn"):(this.isAllSphereActive()||this.isTimerOver())&&(this.handleLoseTurn(),e="loseTurn"),this.isMaxTurnReached()?e="loseGame":this.isQuotaReached()&&(e="winGame"),this.gameState=e}handleWinTurn(){null===this.comboMultipleGoal?(this.comboMultipleGoal=this.comboMultipleCurrent,this.comboMultiple=1):this.comboMultipleGoal===this.comboMultipleCurrent?this.comboMultiple=this.comboMultiple+1:(this.comboMultipleGoal=this.comboMultipleCurrent,this.comboMultiple=1),null===this.comboCountGoal?(this.comboCountGoal=this.comboCountCurrent,this.comboCount=1):this.comboCountGoal===this.comboCountCurrent?this.comboCount=this.comboCount+1:(this.comboCountGoal=this.comboCountCurrent,this.comboCount=1),this.point>0&&(this.quota=this.quota+this.point),this.finishTurn()}handleLoseTurn(){this.comboMultipleGoal=null,this.comboCountGoal=null,this.comboMultiple=0,this.comboCount=0,this.finishTurn()}finishTurn(){this.turn=this.turn+1,this.timer=this.maxTimer,this.sphere=this.pickNewRandomNumber(),this.entriesActive=this.entriesActive.map(e=>!1),this.bordersActive=this.bordersActive.map(e=>!1),this.bordersAlive=this.bordersAlive.map((e,t)=>{const i=-1!==this.bordersActiveIndexesChanged.findIndex(e=>e===t),n=this.bordersDeadCount[t]>=s.Config.scenes.game.reviveAfterTurn;return!(i||!e&&!n)}),this.borders=this.borders.map((e,t)=>this.bordersDeadCount[t]>=this.reviveAfterTurn?this.pickNewRandomNumber():e),this.bordersDeadCount=this.bordersDeadCount.map((e,t)=>e>=this.reviveAfterTurn?0:this.bordersAlive[t]?e:e+1)}pickNewRandomNumber(){return Phaser.Math.RND.pick([1,2,3,4,5,6,7,8,9,2,3,4,5,6,7,8,9])}trackIndexesChanged(e,t){return Array.from(Array(e.length).keys()).reduce((i,s)=>e[s]!==t[s]?[...i,s]:i,[])}get turn(){return this.get("turn")}get timer(){return this.get("timer")}get quota(){return this.get("quota")}get gameState(){return this.get("gameState")}get maxTurn(){return this.get("maxTurn")}get maxTimer(){return this.get("maxTimer")}get maxQuota(){return this.get("maxQuota")}get comboCount(){return this.get("comboCount")}get comboMultiple(){return this.get("comboMultiple")}get sphere(){return this.get("sphere")}get comboMultipleGoal(){return this.get("comboMultipleGoal")}get comboCountGoal(){return this.get("comboCountGoal")}get ratioCreateBorders(){return this.get("ratioCreateBorders")}get borders(){return this.get("borders")}get bordersAlive(){return this.get("bordersAlive")}get bordersActive(){return this.get("bordersActive")}get entries(){return this.get("entries")}get entriesActive(){return this.get("entriesActive")}set turn(e){this.set("turn",e)}set timer(e){this.set("timer",e)}set quota(e){this.set("quota",e)}set gameState(e){this.set("gameState",e)}set comboCount(e){this.set("comboCount",e)}set comboMultiple(e){this.set("comboMultiple",e)}set sphere(e){this.set("sphere",e)}set maxTurn(e){this.set("maxTurn",e)}set maxTimer(e){this.set("maxTimer",e)}set maxQuota(e){this.set("maxQuota",e)}set comboMultipleGoal(e){this.set("comboMultipleGoal",e)}set comboCountGoal(e){this.set("comboCountGoal",e)}set ratioCreateBorders(e){this.set("ratioCreateBorders",e)}set borders(e){this.set("borders",e)}set bordersAlive(e){this.bordersAliveIndexesChanged=this.trackIndexesChanged([...this.bordersAlive],e),this.set("bordersAlive",e)}set bordersActive(e){this.bordersActiveIndexesChanged=this.trackIndexesChanged([...this.bordersActive],e),this.set("bordersActive",e)}set entries(e){this.set("entries",e)}set entriesActive(e){this.entriesActiveIndexesChanged=this.trackIndexesChanged([...this.entriesActive],e),this.set("entriesActive",e)}}t.GameDataManager=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TutorialScene=void 0;const s=i(7),n=i(17),a=i(18),o=i(37);class r extends Phaser.Scene{constructor(){super({key:s.Config.scenes.keys.tutorial})}init(){window.addEventListener("resize",()=>{this.background.setDisplaySize(window.innerWidth,window.innerHeight),this.background.setPosition(0,0),this.board.setPosition(),this.boardPanel.setPosition(),this.tutorialHelperPanel.setPosition()},!1),this.tutorialState="start",this.board=new n.Board(this,!1),this.boardPanel=new a.BoardPanelContainer(this),this.tutorialHelperPanel=new o.TutorialHelperPanel(this),this.currentTurn=this.defaultTurn(),this.currentTurnIndex=0,this.scene.launch(s.Config.scenes.keys.tutorialStartEnd),this.scene.sleep(s.Config.scenes.keys.tutorialStartEnd),this.cameras.main.fadeIn(300,0,0,0,(e,t)=>{t>=1&&this.startTutorial()}),this.events.on("resume",()=>{this.tweens.add({...s.Config.scenes.game.tweens.camera.in,targets:this.cameras.main,callbackScope:this})})}create(){this.setBackground(),this.board.create(),this.boardPanel.create(),this.tutorialHelperPanel.create(),this.pointersImage=[];for(let e=0;e<12;e++)this.pointersImage.push(this.add.image(0,0,s.Config.packer.name,s.Config.packer.hand).setVisible(!1));this.boardPanel.boardRigthPanel.setComboCountText(0,0),this.boardPanel.boardRigthPanel.setComboMultipleText(0,0),this.container=this.add.container(0,0,[this.board.container,this.boardPanel.container,this.tutorialHelperPanel.container,...this.pointersImage]),this.setPositionContainer(),this.turnsTemplate=this.buildTurnsTemplate(),this.turns=this.buildTurns(),this.attachTweenCursor(),this.registerClickNextTurn(),this.nextTurn(this.currentTurnIndex)}attachTweenCursor(){this.tweenCursor&&this.tweenCursor.stop(),this.tweenCursor=this.tweens.add({targets:this.pointersImage,x:"-=10",ease:"Sine.easeInOut",duration:400,repeat:-1,yoyo:!0})}defaultTurn(){return{pointers:[{x:0,y:0}],text:"",sphere:4,entries:[1,2,3,4],borders:[8,2,9,4,7,8,2,3,1,2,4,3],timer:30,turn:5,quota:0,maxQuota:10,maxTurn:10,comboCount:3,comboMultiple:4,comboCountGoal:3,comboMultipleGoal:2}}buildTurnsTemplate(){const e=this.board.entriesGraphics.map(e=>({x:e.x+this.board.container.x+s.Config.board.entrySize+s.Config.board.entryPadding-16,y:e.y+this.board.container.y+s.Config.board.entrySize+s.Config.board.entryPadding})),t=this.board.bordersGraphics.map(e=>({x:e.x+this.board.container.x-12,y:e.y+this.board.container.y}));return[{pointers:[{x:this.board.container.x+this.board.sphereGraphics.x-16,y:this.board.container.y+this.board.sphereGraphics.y}],text:"Core sphere is the numbero to reach\nYou can also reach it with a multiple\nex 4 -> 8\n"},{pointers:t,text:"12 coins that are in blue color\nThey are positioned in the corner\nThey dissappear after you use it\nThey increase the quota by one"},{pointers:e,text:"4 coins that are in yellowish color\nThey are positioned in square borders\nThey never dissapear\nThey don't increase the quota"},{pointers:[{x:this.boardPanel.container.x+this.boardPanel.boardLeftPanel.container.x-16,y:this.boardPanel.container.y+this.boardPanel.boardLeftPanel.container.y+12}],text:"The game comes in turns\nwher core break, turn ends\nYou will need to complete the quota\nbefore all the turns ends!"},{pointers:[{x:this.boardPanel.container.x+this.boardPanel.boardLeftPanel.container.x-16,y:this.boardPanel.container.y+this.boardPanel.boardLeftPanel.container.y+32}],text:"Quota is the game game score\nReach teh quota and win the game\n"},{pointers:[{x:this.boardPanel.container.x+this.boardPanel.boardMiddlePanel.container.x-24,y:this.boardPanel.container.y+this.boardPanel.boardMiddlePanel.container.y+0}],text:"Every turn, there's a time limit\nIf the time runs out\nyou will automatically lose the turn"},{pointers:[{x:this.boardPanel.container.x+this.boardPanel.boardRigthPanel.container.x-16,y:this.boardPanel.container.y+this.boardPanel.boardRigthPanel.container.y+12}],text:"You have a core number 2. 2,4,6,8\nYou make a sum of 8, combo\nNext turn\nYou have a core number 3. 3,6,9,12\nYou make a sum of 12, combo\n"},{pointers:[{x:this.boardPanel.container.x+this.boardPanel.boardRigthPanel.container.x-16,y:this.boardPanel.container.y+this.boardPanel.boardRigthPanel.container.y+32}],text:"You used 3 coins previous turn\nNext turn you use 3 coins combo\nNext turn you use 2 coins lose combo\n"}]}buildTurns(){return this.turnsTemplate.map(e=>({...this.defaultTurn(),...e}))}registerClickNextTurn(){this.input.on(Phaser.Input.Events.POINTER_DOWN,()=>{this.currentTurnIndex===this.turns.length-1?(this.tutorialState="end",this.endTutorial()):(this.currentTurnIndex+=1,this.nextTurn(this.currentTurnIndex))},this)}nextTurn(e){this.cameras.main.fadeIn(200,0,0,0),this.currentTurnIndex>0&&this.game.sounds.switch.play(),this.pointersImage.forEach(e=>{e.setVisible(!1)});const t=Object.assign({},this.defaultTurn(),this.turns[e]);t.pointers.forEach((e,t)=>{this.pointersImage[t].setPosition(e.x,e.y).setVisible(!0)}),this.attachTweenCursor(),this.board.sphereGraphics.setText(t.sphere),t.entries.forEach((e,t)=>{this.board.entriesGraphics[t].setText(e)}),t.borders.forEach((e,t)=>{this.board.bordersGraphics[t].setText(e)}),this.boardPanel.boardLeftPanel.setTurnText(t.turn,t.maxTurn),this.boardPanel.boardMiddlePanel.setTimerText(t.timer),this.boardPanel.boardLeftPanel.setQuotaText(t.quota,t.maxQuota),this.boardPanel.boardRigthPanel.setComboCountText(t.comboCount,t.comboMultipleGoal),this.boardPanel.boardRigthPanel.setComboMultipleText(t.comboMultiple,t.comboMultipleGoal),this.tutorialHelperPanel.setText(t.text)}startTutorial(){this.tweens.add({...s.Config.scenes.game.tweens.camera.out,targets:this.cameras.main,onComplete:()=>{this.scene.pause(s.Config.scenes.keys.tutorial),this.scene.wake(s.Config.scenes.keys.tutorialStartEnd),this.scene.bringToTop(s.Config.scenes.keys.tutorialStartEnd)}})}endTutorial(){this.tweens.add({...s.Config.scenes.game.tweens.camera.out,targets:this.cameras.main,onComplete:()=>{this.scene.pause(s.Config.scenes.keys.tutorial),this.scene.wake(s.Config.scenes.keys.tutorialStartEnd),this.scene.bringToTop(s.Config.scenes.keys.tutorialStartEnd)}})}setBackground(){this.background=this.add.image(0,0,s.Config.images.background).setOrigin(0,0).setDisplaySize(this.scale.width,this.scale.height)}setPositionContainer(){this.container.setPosition(this.scale.width/2-s.Config.board.width/2,this.scale.height/2-(s.Config.board.height+s.Config.panels.board.height+s.Config.panels.tutorial.height+s.Config.panels.tutorial.marginTop+s.Config.board.marginTop)/2)}}t.TutorialScene=r},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TutorialHelperPanel=void 0;const s=i(7);t.TutorialHelperPanel=class{constructor(e){this.scene=e}create(){this.initBackground(),this.initText(),this.initContainer(),this.setPosition()}initBackground(){this.background=this.scene.add.image(0,0,s.Config.packer.name,s.Config.packer.bannerModern).setOrigin(0,0).setSize(s.Config.panels.tutorial.width,s.Config.panels.tutorial.height).setDisplaySize(s.Config.panels.tutorial.width,s.Config.panels.tutorial.height)}initText(){this.text=this.scene.add.text(s.Config.panels.tutorial.paddingX,s.Config.panels.tutorial.paddingY,"default",s.Config.panels.tutorial.styles.text)}initContainer(){this.container=this.scene.add.container(0,0,[this.background,this.text])}setText(e){this.text.setText(e)}setPosition(){this.container.setPosition(0,s.Config.panels.board.height+s.Config.board.marginTop+s.Config.board.height+s.Config.panels.tutorial.marginTop)}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PauseScene=void 0;const s=i(7);class n extends Phaser.Scene{constructor(){super({key:s.Config.scenes.keys.gamePause})}init(){this.images=[],this.id=0,this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.P).on("down",()=>{this.scene.resume(s.Config.scenes.keys.game),this.scene.sleep(s.Config.scenes.keys.gamePause)}),this.input.mouse.disableContextMenu(),this.input.on(Phaser.Input.Events.POINTER_DOWN,e=>{if(e.rightButtonDown()){for(let e of this.images)e.destroy();this.images=[]}e.leftButtonDown()&&this.images.push(this.add.image(this.game.input.mousePointer.x,this.game.input.mousePointer.y,s.Config.packer.name,s.Config.packer.hand))}),this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.I).on("down",()=>{const e=this.scene.get(s.Config.scenes.keys.game);this.game.renderer.snapshotArea(e.boardPanel.container.x,e.boardPanel.container.y,424,544,e=>{localStorage.setItem("snapshot-"+this.id,e.src)},"png"),this.id++})}}t.PauseScene=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MenuScene=void 0;const s=i(40);Object.defineProperty(t,"MenuScene",{enumerable:!0,get:function(){return s.MenuScene}})},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MenuScene=void 0;const s=i(19),n=i(20),a=i(7),o=i(21);class r extends Phaser.Scene{constructor(){super({key:a.Config.scenes.keys.menu})}init(){this.scale.on("resize",()=>{this.background.setDisplaySize(window.innerWidth,window.innerHeight),this.background.setPosition(0,0),this.mainContainer.setPosition(this.scale.width/2,this.scale.height/2-250)}),this.currentDifficulty=window.localStorage.getItem("difficulty")||"easy",this.currentEntries=[1,2,3,4];const e=window.localStorage.getItem("entries");e&&(this.currentEntries=JSON.parse(e)),this.stateService=n.buildMenuService(this),this.stateService.start(),a.Config.scenes.menu.logState&&this.stateService.onTransition(e=>{console.log(e)}),this.scene.launch(a.Config.scenes.keys.entriesSelection),this.scene.sleep(a.Config.scenes.keys.entriesSelection),this.events.on("wake",()=>{this.tweens.add({...a.Config.scenes.menu.tweens.camera.in,targets:this.cameras.main,callbackScope:this,onComplete:()=>{this.stateService.send(n.EVENT.WAKE)}})})}create(){this.setBackground(),this.setBackgroundContainer(),this.setBanner(),this.setDifficultiesContainer(),this.setHelpEntriesContainer(),this.setEntriesContainer(),this.setButtonPlay(),this.setButtonTutorial(),this.setSoundImage(),this.setMainContainer();const e=this.difficultiesGraphics.find(e=>e.name===this.currentDifficulty);this.handleDifficultySelected(e),"game"===a.Config.scenes.skip.scene&&this.stateService.send(n.EVENT.PLAY),"tutorial"===a.Config.scenes.skip.scene&&this.stateService.send(n.EVENT.TUTORIAL)}setBackground(){this.background=this.add.image(0,0,a.Config.images.background).setOrigin(0,0).setDisplaySize(this.scale.width,this.scale.height)}setBackgroundContainer(){this.backgroundContainer=this.add.tileSprite(0,0,a.Config.scenes.menu.background.width,a.Config.scenes.menu.background.height,a.Config.packer.name,a.Config.packer.pattern)}setBanner(){const e=this.add.image(0,0,a.Config.packer.name,a.Config.packer.bannerHanging),t=this.add.text(0,2,"Spherebreak",a.Config.scenes.menu.styles.coin).setOrigin(.5,.5).setScale(2,2);this.banner=this.add.container(0,0,[e,t])}setDifficultiesContainer(){const e=this.add.text(a.Config.scenes.menu.difficulties.textLeftPadding,0,"Difficulty",a.Config.scenes.menu.styles.coin),t=["easy","medium","hard","insane"],i=[a.Config.packer.difficulties.easy,a.Config.packer.difficulties.medium,a.Config.packer.difficulties.hard,a.Config.packer.difficulties.insane];this.difficultiesGraphics=[];for(const e of Array(4).keys()){const s=e%2,r=Math.floor(e/2),h=new o.DifficultyGraphics(this,t[e],s*(a.Config.scenes.menu.difficulties.width+a.Config.scenes.menu.difficulties.xPadding),r*(a.Config.scenes.menu.difficulties.height+a.Config.scenes.menu.difficulties.yPadding)+a.Config.scenes.menu.difficulties.textBottomPadding,a.Config.scenes.menu.difficulties.width,a.Config.scenes.menu.difficulties.height,a.Config.packer.name,i[e],65280);h.image.setInteractive({cursor:"pointer",pixelPerfect:!0}).on(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,()=>{this.stateService.send(n.EVENT.SELECT_DIFFICULTY,{value:h})}),this.difficultiesGraphics.push(h)}this.difficultiesContainer=this.add.container(0,0,[e,...this.difficultiesGraphics])}setEntriesContainer(){const e=this.add.text(a.Config.scenes.menu.entries.textLeftPadding,0,"Coins",a.Config.scenes.menu.styles.coin).setOrigin(0,0);this.entriesGraphics=[];for(const e of Array(4).keys()){const t=e%2,i=Math.floor(e/2),s=new o.EntryGrahpics(this,t*(a.Config.scenes.menu.entries.width+a.Config.scenes.menu.entries.xPadding),i*(a.Config.scenes.menu.entries.height+a.Config.scenes.menu.entries.yPadding)+a.Config.scenes.menu.entries.textBottomPadding,a.Config.scenes.menu.entries.width,a.Config.scenes.menu.entries.height,a.Config.packer.name,a.Config.packer.coinEntry,this.currentEntries[e]);s.image.setInteractive({cursor:"pointer",pixelPerfect:!0}).on(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,()=>{this.stateService.send(n.EVENT.SELECT_ENTRIES,{value:{entry:s,index:e}})},this),this.entriesGraphics.push(s)}this.entriesContainer=this.add.container(0,0,[e,...this.entriesGraphics,this.entriesHelpContainer])}setHelpEntriesContainer(){this.entriesHelperGraphics=[];for(const e of Array(9).keys()){const t=e%3,i=Math.floor(e/3),s=new o.EntryGraphicsHelper(this,(t-1)*a.Config.scenes.menu.helperEntries.width,(i-1)*a.Config.scenes.menu.helperEntries.height,a.Config.scenes.menu.helperEntries.width,a.Config.scenes.menu.helperEntries.height,a.Config.packer.name,a.Config.packer.coinBorder,e+1);s.image.setInteractive({cursor:"pointer",pixelPerfect:!0}).on(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,()=>{this.stateService.send(n.EVENT.SELECT_ENTRY,{value:s})}),s.image.setInteractive({enabled:!1}),this.entriesHelperGraphics.push(s)}this.entriesHelpContainer=this.add.container(0,0,this.entriesHelperGraphics),this.entriesHelpContainer.setActive(!1).setVisible(!1)}setButtonPlay(){this.buttonPlay=this.add.buttonContainer(0,0,a.Config.packer.name,a.Config.packer.menuButton,14540253).setUpTint(13421772).setOverTint(15658734).setDownTint(16316664).setScale(1.24).setText("Play").setTextStyle(a.Config.scenes.menu.styles.button),this.buttonPlay.button.setScale(1.24),this.buttonPlay.button.on(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,()=>{this.stateService.send(n.EVENT.PLAY)})}setButtonTutorial(){this.buttonTutorial=this.add.buttonContainer(0,0,a.Config.packer.name,a.Config.packer.menuButton,14540253).setUpTint(13421772).setOverTint(15658734).setDownTint(16316664).setScale(1.24).setText("Tutorial").setTextStyle(a.Config.scenes.menu.styles.button),this.buttonTutorial.button.setScale(1.24),this.buttonTutorial.button.on(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,()=>{this.stateService.send(n.EVENT.TUTORIAL)})}setSoundImage(){this.soundImage=this.add.image(a.Config.scenes.menu.soundImage.x,a.Config.scenes.menu.soundImage.y,a.Config.packer.name,a.Config.packer.soundOff).setInteractive({cursor:"pointer"}).on(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,()=>{this.toggleSound()}),this.soundImage.setScale(1.4,1.4)}setMainContainer(){this.mainContainer=this.add.container(0,0,[this.backgroundContainer.setOrigin(.5,0),this.banner,this.entriesContainer.setPosition(a.Config.scenes.menu.entriesContainer.x,a.Config.scenes.menu.entriesContainer.y),this.difficultiesContainer.setPosition(a.Config.scenes.menu.difficultiesContainer.x,a.Config.scenes.menu.difficultiesContainer.y),this.buttonPlay.setPosition(a.Config.scenes.menu.buttonPlay.x,a.Config.scenes.menu.buttonPlay.y),this.buttonTutorial.setPosition(a.Config.scenes.menu.buttonTutorial.x,a.Config.scenes.menu.buttonTutorial.y),this.soundImage]).setPosition(this.scale.width/2,this.scale.height/2-a.Config.scenes.menu.background.height/2)}fromMenuToEntriesSelection(){this.tweens.add({...a.Config.scenes.menu.tweens.camera.out,targets:this.cameras.main,onComplete:()=>{this.scene.pause(a.Config.scenes.keys.menu),this.scene.wake(a.Config.scenes.keys.entriesSelection,this)}})}fromEntriesToSelectionToMenu(){this.scene.sleep(a.Config.scenes.keys.entriesSelection),this.scene.wake(a.Config.scenes.keys.menu)}toggleSound(){!0===this.game.isMute?(this.soundImage.setFrame(a.Config.packer.soundOn),this.game.isMute=!1):(this.soundImage.setFrame(a.Config.packer.soundOff),this.game.isMute=!0),s.Howler.mute(this.game.isMute)}handleTutorial(){this.game.sounds.click.play(),this.scene.start(a.Config.scenes.keys.tutorial)}handlePlay(){a.Config.ads.play&&window.gdsdk.showAd(),this.saveState(),this.game.sounds.click.play(),this.cameras.main.fadeOut(300,0,0,0,(e,t)=>{t>=1&&(this.scene.start(a.Config.scenes.keys.game,{difficulty:this.currentDifficulty,entries:this.currentEntries}),this.scene.launch(a.Config.scenes.keys.gamePause),this.scene.sleep(a.Config.scenes.keys.gamePause))})}handleDifficultySelected(e){this.game.sounds.click.play(),this.currentDifficulty=e.name,e.selectDifficulty()}handleEntriesSelected(e,t){this.game.sounds.click.play(),this.selectedEntry=e,this.selectedEntryIndex=t,this.fromMenuToEntriesSelection()}handleEntrySelected(e){this.game.sounds.click.play();const t=this.entriesGraphics.map(e=>e.numero);this.currentEntries[this.selectedEntryIndex]=e.numero,t.find(t=>t===e.numero)||(this.entriesHelpContainer.setVisible(!1).setActive(!1),this.selectedEntry.setNumero(e.numero)),this.fromEntriesToSelectionToMenu()}saveState(){localStorage.setItem("difficulty",this.currentDifficulty),localStorage.setItem("entries",JSON.stringify(this.currentEntries))}}t.MenuScene=r},,function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EntriesSelectionScene=void 0;const s=i(20),n=i(7),a=i(21);class o extends Phaser.Scene{constructor(){super({key:n.Config.scenes.keys.entriesSelection})}init(){window.addEventListener("resize",()=>{this.entriesHelpContainer.setPosition(this.scale.width/2,this.scale.height/2)},!1),this.menuScene=this.scene.get(n.Config.scenes.keys.menu),this.events.on("wake",()=>{this.showEntries()})}create(){this.setEntriesContainer(),this.clickSound=this.sound.add(n.Config.sounds.click),this.input.on(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,()=>{this.menuScene.stateService.send(s.EVENT.UNSELECT_ENTRIES)},this)}setEntriesContainer(){this.entriesHelperGraphics=[];for(const e of Array(9).keys()){const t=e%3,i=Math.floor(e/3),o=new a.EntryGraphicsHelper(this,(t-1)*(n.Config.scenes.menu.helperEntries.width+n.Config.scenes.menu.helperEntries.xPadding),(i-1)*(n.Config.scenes.menu.helperEntries.height+n.Config.scenes.menu.helperEntries.yPadding),n.Config.scenes.menu.helperEntries.width,n.Config.scenes.menu.helperEntries.height,n.Config.packer.name,n.Config.packer.coinBorder,e+1);o.image.setInteractive({cursor:"pointer",pixelPerfect:!0}).on(Phaser.Input.Events.GAMEOBJECT_POINTER_DOWN,()=>{this.clickSound.play(),this.menuScene.stateService.send(s.EVENT.SELECT_ENTRY,{value:o})}),o.image.setInteractive({enabled:!1}),this.entriesHelperGraphics.push(o)}this.entriesHelpContainer=this.add.container(this.scale.width/2,this.scale.height/2,this.entriesHelperGraphics)}showEntries(){const e=this.menuScene.entriesGraphics.map(e=>e.numero);this.entriesHelperGraphics.forEach(t=>{e.find(e=>e===t.numero)?t.image.setAlpha(.4).setActive(!1):t.image.setAlpha(1).setActive(!0)})}}t.EntriesSelectionScene=o},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GameOverScene=void 0;const s=i(7);class n extends Phaser.Scene{constructor(){super({key:s.Config.scenes.keys.gameOver})}init(){this.gameScene=this.scene.get(s.Config.scenes.keys.game),this.events.on("wake",()=>{this.showMenu()}),window.addEventListener("resize",()=>{const[e,t]=this.getContainerCenterPosition();this.container.setPosition(e,t)},!1)}create(){this.buttonPlay=this.add.buttonContainer(0,100,s.Config.packer.name,s.Config.packer.menuButton,14540253).setUpTint(13421772).setOverTint(15658734).setDownTint(16316664).setTextStyle(s.Config.scenes.gameOver.styles.button).setText("Play Again"),this.buttonPlay.button.setDisplaySize(s.Config.scenes.gameOver.button.width,s.Config.scenes.gameOver.button.height).setSize(s.Config.scenes.gameOver.button.width,s.Config.scenes.gameOver.button.height).on(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,()=>{this.HandlePlayAgain()}),this.buttonBack=this.add.buttonContainer(this.buttonPlay.button.width+s.Config.scenes.gameOver.button.padding,100,s.Config.packer.name,s.Config.packer.menuButton,14540253).setUpTint(13421772).setOverTint(15658734).setDownTint(16316664).setTextStyle(s.Config.scenes.gameOver.styles.button).setText("Back To Menu"),this.buttonBack.button.setSize(s.Config.scenes.gameOver.button.width,s.Config.scenes.gameOver.button.height).setDisplaySize(s.Config.scenes.gameOver.button.width,s.Config.scenes.gameOver.button.height).on(Phaser.Input.Events.GAMEOBJECT_POINTER_UP,()=>{this.handleBackToMenu()}),this.text=this.add.text((this.buttonPlay.button.width+s.Config.scenes.gameOver.button.padding/2)/2,0,"",s.Config.scenes.gameOver.styles.text),this.text.setOrigin(.5,.5);const[e,t]=this.getContainerCenterPosition();this.container=this.add.container(e,t,[this.text,this.buttonPlay,this.buttonBack])}handleBackToMenu(){this.scene.stop(s.Config.scenes.keys.game),this.scene.stop(s.Config.scenes.keys.gameOver),this.scene.start(s.Config.scenes.keys.menu)}HandlePlayAgain(){s.Config.ads.playAgain&&window.gdsdk.showAd(),this.scene.stop(s.Config.scenes.keys.game),this.scene.stop(s.Config.scenes.keys.gameOver),this.scene.start(s.Config.scenes.keys.game)}getContainerCenterPosition(){const e=this.buttonPlay.button.width,t=this.buttonPlay.button.height;return[.5*this.scale.width-.5*e-.5*s.Config.scenes.gameOver.button.padding,.5*this.scale.height-.5*t-.5*s.Config.scenes.gameOver.button.padding]}showMenu(){this.text.setText({loseGame:"You Lose!",winGame:"You Win!",startGame:"_",winTurn:"_",loseTurn:"_"}[this.gameScene.data.gameState])}}t.GameOverScene=n},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TutorialStartEndScene=void 0;const s=i(7);class n extends Phaser.Scene{constructor(){super({key:s.Config.scenes.keys.tutorialStartEnd})}init(){this.tutorialScene=this.scene.get(s.Config.scenes.keys.tutorial),this.events.on("wake",()=>{this.showText()}),this.registerClick()}create(){this.text=this.add.text(.5*this.scale.width,.5*this.scale.height-10,"",s.Config.scenes.tutorialStartEndScene.styles.text),this.text.setOrigin(.5,.5)}showText(){this.text.setText({start:"Welcome, Tap to start the tutorial!",middle:"_",end:"Tap to end the tutorial!"}[this.tutorialScene.tutorialState])}registerClick(){this.input.on(Phaser.Input.Events.POINTER_DOWN,()=>{"start"===this.tutorialScene.tutorialState?this.handleStartTutorial():"end"===this.tutorialScene.tutorialState&&this.handleEndTutorial()})}handleStartTutorial(){this.scene.resume(s.Config.scenes.keys.tutorial),this.scene.sleep(s.Config.scenes.keys.tutorialStartEnd)}handleEndTutorial(){this.scene.stop(s.Config.scenes.keys.tutorial),this.scene.stop(s.Config.scenes.keys.tutorialStartEnd),this.scene.start(s.Config.scenes.keys.menu)}}t.TutorialStartEndScene=n},function(e,t,i){"use strict";function s(){var e,t,i,s,n;e=document,t="script",i="gamedistribution-jssdk",n=e.getElementsByTagName(t)[0],e.getElementById(i)||((s=e.createElement(t)).id=i,s.src="https://html5.api.gamedistribution.com/main.min.js",n.parentNode.insertBefore(s,n))}function n(){window.gdsdk={},window.gdsdk.showAd=()=>{}}i.r(t),i.d(t,"initGameDistribution",(function(){return s})),i.d(t,"mockGameDistribution",(function(){return n})),window.GD_OPTIONS={gameId:"362e7a035b4d4875931051da2d62ddc3",onEvent:function(e){e.name}}}]);